{% extends "base.html" %}

{% block content %}
<div class="row">
    <div class="col-md-4">
        <div class="game-card p-4 mb-4">
            <div class="text-center">
                <h3><i class="fas fa-user-circle"></i> {{ user.name }}</h3>
                <div class="level-badge mt-2">Level {{ user.level }}</div>
            </div>
            
<div class="mt-4">
    <h5>Experience Progress</h5>

    {% set max_xp = 440 %}
    {% set xp_percentage = (user.xp / max_xp) * 100 %}

    <div class="xp-bar">
        <div class="xp-progress" style="width: {{ xp_percentage }}%"></div>
    </div>

    <small class="text-muted">
        {{ user.xp }} XP / {{ max_xp }} XP
    </small>
</div>
            
            <div class="mt-3">
                <span class="badge-custom bg-warning">
                    <i class="fas fa-trophy"></i> {{ user.badge }}
                </span>
                {% if user.login_streak >= 7 %}
                    <span class="badge-custom bg-danger ms-2">
                        <i class="fas fa-fire streak-fire"></i> {{ user.login_streak }} Day Streak!
                    </span>
                {% endif %}
            </div>
        </div>
        
        <div class="game-card p-4">
            <h5><i class="fas fa-chart-line"></i> Stats</h5>
            <ul class="list-unstyled">
                <li><i class="fas fa-star text-warning"></i> Skills Completed: {{ user.skills_completed }}</li>
                <li><i class="fas fa-fire text-danger"></i> Login Streak: {{ user.login_streak }} days</li>
                <li><i class="fas fa-briefcase text-primary"></i> Career: {{ user.career or 'Not Chosen' }}</li>
            </ul>
        </div>
    </div>
    
    <div class="col-md-8">
        <div class="game-card p-4">
            <h3><i class="fas fa-gamepad"></i> Your Journey</h3>
            
            {% if not user.career %}
                <div class="text-center py-5">
                    <i class="fas fa-compass fa-4x text-muted mb-3"></i>
                    <h4>Choose Your Path</h4>
                    <p class="text-muted">Select a career to begin your skill development journey</p>
                    <a href="{{ url_for('careers') }}" class="btn btn-game btn-lg">Choose Career</a>
                </div>
            {% else %}
                <div class="row">
                    <div class="col-md-6">
                        <div class="text-center p-3">
                            <i class="fas fa-code fa-3x text-primary mb-2"></i>
                            <h5>{{ user.career }}</h5>
                            <p class="text-muted">Master the skills of modern web development</p>
                            <a href="{{ url_for('skills') }}" class="btn btn-game">View Skills</a>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="text-center p-3">
                            <i class="fas fa-tasks fa-3x text-success mb-2"></i>
                            <h5>Quick Actions</h5>
                            <div class="d-grid gap-2">
                                <a href="{{ url_for('skills') }}" class="btn btn-outline-primary">Skill Tree</a>
                                <a href="{{ url_for('final') }}" class="btn btn-outline-success">Final Challenge</a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <hr>
                
                <h5><i class="fas fa-flag-checkered"></i> Progress Overview</h5>
                <div class="progress" style="height: 25px;">
                    {% set progress_percentage = (user.skills_completed / 12) * 100 %}
                    <div class="progress-bar bg-success" style="width: {{ progress_percentage }}%">
                        {{ user.skills_completed }}/12 Skills Completed
                    </div>
                </div>
                
                {% if user.skills_completed >= 12 %}
                    <div class="text-center mt-3">
                        <a href="{{ url_for('final') }}" class="btn btn-success btn-lg">
                            <i class="fas fa-crown"></i> Take Final Challenge (+200 XP)
                        </a>
                    </div>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}